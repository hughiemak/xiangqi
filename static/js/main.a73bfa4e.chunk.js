(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{249:function(e,a,t){"use strict";t.r(a);var s=t(0),l=t.n(s),r=t(91),n=t.n(r);t(7),t(92),t(98);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var c=t(1),i=t(2),u=t(4),o=t(3),d=t(5),h=t(29),m=(t(99),function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(o.a)(a).call(this,e))).normalBGColor="white",t.highlightedBGColor="#cccccc",t.highlight=function(){t.setState({highlight:!0})},t.unhighlight=function(){t.setState({highlight:!1})},t.state={backgroundColor:t.normalBGColor,highlight:!1},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:this.state.highlight?"highlight-piece":"unhighlight-square"},l.a.createElement("div",{className:"piece",style:{backgroundColor:this.state.backgroundColor,borderColor:this.props.player,color:this.props.player}},this.props.text))}}]),a}(l.a.Component)),p=Object.freeze({Red:"red",Black:"black"});function y(){return p}var v=Object.freeze({King:1,Advisor:2,Elephant:3,Cannon:4,Horse:5,Chariot:6,Soldier:7});function E(){return v}var q=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u5e25":"\u5c07",player:this.props.player})}},{key:"isMovePossible",value:function(e,a){var t=Math.abs(a.x-e.x),s=Math.abs(a.y-e.y);return(0==t||1==t)&&(0==s||1==s)}},{key:"getChessType",value:function(){return E().King}}]),a}(m),f=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u4ed5":"\u58eb",player:this.props.player})}}]),a}(m),N=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u76f8":"\u8c61",player:this.props.player})}}]),a}(m),g=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u5175":"\u5352",player:this.props.player})}}]),a}(m),b=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u4fe5":"\u8eca",player:this.props.player})}}]),a}(m),k=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u70ae":"\u7832",player:this.props.player})}}]),a}(m),O=function(e){function a(e){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).call(this,e))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement(m,{text:this.props.player===y().Red?"\u508c":"\u99ac",player:this.props.player})}}]),a}(m);var j=function(e){function a(e){var t;Object(c.a)(this,a),(t=Object(u.a)(this,Object(o.a)(a).call(this,e))).onClick=function(){t.props.x,t.props.y;t.props.onClick(Object(h.a)(t))},t.hasPiece=function(){return null!=t.state.piece},t.onFocus=function(){console.log("this.hasPiece(): "+t.hasPiece()),t.hasPiece()&&t.setState({borderColor:"black"})},t.select=function(){t.setState({isSelected:!0})},t.unselect=function(){t.setState({isSelected:!1})};var s=t.props.piece;console.log("Square this.props.piece: "+t.props.piece);var l={x:t.props.x,y:t.props.y};return t.state={isSelected:!1,piece:s,backgroundColor:"none",borderColor:"yellow",coord:l,highlight:t.props.highlight},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.piece!==e.piece&&this.setState({piece:this.props.piece}),this.props.highlight!==e.highlight&&this.setState({highlight:this.props.highlight})}},{key:"render",value:function(){return l.a.createElement("button",{className:"square",onClick:this.onClick,style:{backgroundColor:this.state.backgroundColor,borderColor:"transparent"}},l.a.createElement("div",{className:this.state.highlight?this.state.piece.player===y().Red?"highlight-piece-in-red":"highlight-piece":"unhighlight-square"},function(e){if(null==e)return null;var a=e.player;switch(e.chessType){case E().King:return l.a.createElement(q,{player:a});case E().Advisor:return l.a.createElement(f,{player:a});case E().Elephant:return l.a.createElement(N,{player:a});case E().Cannon:return l.a.createElement(k,{player:a});case E().Horse:return l.a.createElement(O,{player:a});case E().Chariot:return l.a.createElement(b,{player:a});case E().Soldier:return l.a.createElement(g,{player:a});default:return null}}(this.state.piece)))}},{key:"setKing",value:function(e){this.setState({piece:l.a.createElement(q,null)},e)}}]),a}(l.a.Component),S=function(e){function a(e){var t;return Object(c.a)(this,a),(t=Object(u.a)(this,Object(o.a)(a).call(this,e))).state={squares:t.props.squares,unselect:t.props.unselect,select:t.props.select},t}return Object(d.a)(a,e),Object(i.a)(a,[{key:"componentDidUpdate",value:function(e){this.props.squares!==e.squares&&this.setState({squares:this.props.squares}),this.props.unselect!==e.unselect&&this.setState({unselect:this.props.unselect}),this.props.select!==e.select&&this.setState({select:this.props.select})}},{key:"renderSquare",value:function(e,a,t,s){var r=this;return l.a.createElement(j,{piece:this.state.squares[t][a],key:e,x:a,y:t,onClick:function(e){return r.onClick(e)},setClick:function(e){return r.clickChild=e},highlight:s})}},{key:"onClick",value:function(e){this.props.onClick(e)}},{key:"render",value:function(){for(var e=[],a=9;a>=0;a--){for(var t=[],s=0;s<9;s++){var r,n=a.toString()+s.toString(),c=this.state.select;r=null!=c&&(c.x==s&&c.y==a),t.push(this.renderSquare(n,s,a,r))}e.push(l.a.createElement("div",{className:"board-row",key:a},t))}return l.a.createElement("div",null,e)}}]),a}(l.a.Component);function C(e,a){return{chessType:e,player:a}}function x(){console.log("initChessBoard");var e=[[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null],[null,null,null,null,null,null,null,null,null]];return e[0][4]=C(E().King,y().Red),e[9][4]=C(E().King,y().Black),e[0][5]=C(E().Advisor,y().Red),e[0][3]=C(E().Advisor,y().Red),e[9][5]=C(E().Advisor,y().Black),e[9][3]=C(E().Advisor,y().Black),e[0][2]=C(E().Elephant,y().Red),e[0][6]=C(E().Elephant,y().Red),e[9][6]=C(E().Elephant,y().Black),e[9][2]=C(E().Elephant,y().Black),e[2][1]=C(E().Cannon,y().Red),e[2][7]=C(E().Cannon,y().Red),e[7][1]=C(E().Cannon,y().Black),e[7][7]=C(E().Cannon,y().Black),e[0][1]=C(E().Horse,y().Red),e[0][7]=C(E().Horse,y().Red),e[9][1]=C(E().Horse,y().Black),e[9][7]=C(E().Horse,y().Black),e[0][0]=C(E().Chariot,y().Red),e[0][8]=C(E().Chariot,y().Red),e[9][0]=C(E().Chariot,y().Black),e[9][8]=C(E().Chariot,y().Black),e[3][0]=C(E().Soldier,y().Red),e[3][2]=C(E().Soldier,y().Red),e[3][4]=C(E().Soldier,y().Red),e[3][6]=C(E().Soldier,y().Red),e[3][8]=C(E().Soldier,y().Red),e[6][0]=C(E().Soldier,y().Black),e[6][2]=C(E().Soldier,y().Black),e[6][4]=C(E().Soldier,y().Black),e[6][6]=C(E().Soldier,y().Black),e[6][8]=C(E().Soldier,y().Black),e}function R(e,a,t){if(0===w(e,a).xDiff){for(var s=e.x,l=B(e,a).yDir,r=!1,n=e.y+l;n!=a.y;n+=l){console.log("hasPieceBetween i: "+n),null!=t[n][s]&&(r=!0)}return r}if(0===w(e,a).yDiff){var c=e.y,i=B(e,a).xDir;for(r=!1,n=e.x+i;n!=a.x;n+=i){console.log("hasPieceBetween i: "+n),null!=t[c][n]&&(r=!0)}return r}}function w(e,a){return{xDiff:Math.abs(a.x-e.x),yDiff:Math.abs(a.y-e.y)}}function B(e,a){var t=Math.sign(a.y-e.y);return{xDir:Math.sign(a.x-e.x),yDir:t}}function D(e,a){return a[e.y][e.x]}function P(e,a,t,s){var l=JSON.parse(JSON.stringify(s));return l[a.y][a.x]=null,l[t.y][t.x]=e,l}t(113);var G=function(e){function a(){return Object(c.a)(this,a),Object(u.a)(this,Object(o.a)(a).apply(this,arguments))}return Object(d.a)(a,e),Object(i.a)(a,[{key:"render",value:function(){return l.a.createElement("div",{className:"display-board"},l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-right"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-left"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-left"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-right"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square-no-right-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-vert-border"}),l.a.createElement("div",{className:"display-square-no-left-border"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-right"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-left"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-left"}),l.a.createElement("div",{className:"display-square-with-diagonal-top-right"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}),l.a.createElement("div",{className:"display-square"}))}}]),a}(l.a.Component),H=function(e){function a(){var e;return Object(c.a)(this,a),(e=Object(u.a)(this,Object(o.a)(a).call(this))).state={squares:x(),isSelectingChess:!0,selectedSquare:null,unselect:null,select:null,turn:y().Red},e}return Object(d.a)(a,e),Object(i.a)(a,[{key:"toggleTurn",value:function(){this.state.turn===y().Red?this.setState({turn:y().Black}):this.setState({turn:y().Red})}},{key:"isSelectingChess",value:function(){return!!this.state.isSelectingChess}},{key:"isPlacingPiece",value:function(){return!this.state.isSelectingChess}},{key:"squreHavePiece",value:function(e){return null!==e.state.piece}},{key:"activateSquare",value:function(e){}},{key:"deactivateSquare",value:function(e){}},{key:"handleClick",value:function(e){var a=this.state.squares,t=e.state.coord,s=this.state.turn;if(this.isSelectingChess()){if(this.squreHavePiece(e))D(t,a).player===s?(console.log("G01: selecting your chess"),this.setState({select:t},function(){this.setState({isSelectingChess:!1})})):console.log("G02: cannot select opponent chess");else console.log("G03: cannot select empty square")}else{var l=D(t,a);if(null!==l&&l.player===s)console.log("G04: selecting another chess"),this.setState({select:t},function(){this.setState({isSelectingChess:!1})});else{var r=this.state.select,n=D(r,a),c=(n.chessType,e.state.coord);if(function(e,a,t,s){var l=w(e,a).xDiff,r=w(e,a).yDiff;if(0===l&&0===r)return!1;switch(t.chessType){case E().King:return t.player==y().Red?!(3!=a.x&&4!=a.x&&5!=a.x||0!=a.y&&1!=a.y&&2!=a.y)&&(0===l||1===l)&&(0===r||1===r):!(3!=a.x&&4!=a.x&&5!=a.x||7!=a.y&&8!=a.y&&9!=a.y)&&(0===l&&1===r||1===l&&0===r);case E().Advisor:return t.player==y().Red?!(3!=a.x&&4!=a.x&&5!=a.x||0!=a.y&&1!=a.y&&2!=a.y)&&1===l&&1===r:!(3!=a.x&&4!=a.x&&5!=a.x||7!=a.y&&8!=a.y&&9!=a.y)&&1===l&&1===r;case E().Elephant:if(t.player==y().Red){if(0==a.y||1==a.y||2==a.y||3==a.y||4==a.y){var n=B(e,a);return null==s[e.y+n.yDir][e.x+n.xDir]&&2===l&&2===r}return!1}if(5==a.y||6==a.y||7==a.y||8==a.y||9==a.y){var c=B(e,a);return null==s[e.y+c.yDir][e.x+c.xDir]&&2===l&&2===r}return!1;case E().Cannon:if(0===l||0===r){var i=s[a.y][a.x];return t.player,R(e,a,s)?null!=i:null==i}return!1;case E().Horse:if(1===l&&2===r||2===l&&1===r){if(2===l){var u=Math.sign(a.x-e.x),o=e.y,d=e.x+u;return null==s[o][d]}var h=Math.sign(a.y-e.y),m=e.y+h,p=e.x;return null==s[m][p]}return!1;case E().Chariot:return(0===l||0===r)&&!R(e,a,s);case E().Soldier:return t.player==y().Red?e.y<=4?a.y-e.y===1&&0===l:(1!==l||1!==r)&&a.y-e.y!==-1:e.y>4?a.y-e.y===-1&&0===l:(1!==l||1!==r)&&a.y-e.y!==1}}(r,c,n,a))if(this.squreHavePiece(e)){console.log("G06: eating opponent chess");var i=P(n,r,c,a);D(c,a);this.setState({squares:i,select:null},function(){this.setState({isSelectingChess:!0}),this.toggleTurn()})}else{console.log("G05: moving chess to empty square");var u=P(n,r,c,a);this.setState({squares:u,select:null},function(){this.setState({isSelectingChess:!0}),this.toggleTurn()})}else console.log("G08: cannot make such move"),this.setState({isSelectingChess:!1})}}}},{key:"render",value:function(){var e=this;return l.a.createElement("div",null,l.a.createElement("div",{className:"chess-container"},l.a.createElement("div",{className:"board-row"},l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}))),l.a.createElement("div",{className:"game"},l.a.createElement(G,null),l.a.createElement("div",{className:"game-board"},l.a.createElement(S,{squares:this.state.squares,onClick:function(a){return e.handleClick(a)},unselect:this.state.unselect,select:this.state.select}))),l.a.createElement("div",{className:"chess-container"},l.a.createElement("div",{className:"board-row"},l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}),l.a.createElement("div",{className:"chess-square"}))))}}]),a}(l.a.Component);n.a.render(l.a.createElement(H,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},7:function(e,a,t){},92:function(e,a,t){e.exports=t.p+"static/media/logo.5d5d9eef.svg"},93:function(e,a,t){e.exports=t(249)},98:function(e,a,t){}},[[93,1,2]]]);
//# sourceMappingURL=main.a73bfa4e.chunk.js.map